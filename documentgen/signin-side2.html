<!DOCTYPE html>
<html lang="en" dir="ltr" class="light">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="ie=edge">
		<title>Treasury Document Wizard - Login</title>

		<!-- Core CSS -->
		<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/style.css') }}">
	</head>
	<body>
		<!-- App Start-->
		<div id="root">
			<!-- App Layout-->
			<div class="app-layout-blank flex flex-auto flex-col h-[100vh]">
                <div class="h-full flex flex-auto flex-col justify-between">
                    <main class="h-full">
                        <div class="page-container relative h-full flex flex-auto flex-col">
                            <div class="grid lg:grid-cols-3 h-full">
                                <div class="bg-no-repeat bg-cover py-6 px-16 flex-col justify-between hidden lg:flex" style="background-image: url('{{ url_for('static', filename='img/others/auth-side-bg.jpg') }}');">
      
                                    <div>
                                        <div class="mb-6 flex items-center gap-4">
                                            <span class="avatar avatar-circle avatar-md border-2 border-white">
                                                <span class="avatar avatar-circle bg-teal-500 dark:bg-teal-500" data-avatar-size="30"">
                                                    <span class="avatar-string">{{ user_info.get('shortname', '') }}</span>
                                                </span>
                                            </span>
                                            <div class="text-white">
                                                <div class="font-semibold text-base">{{ user_info.get('first_name', '') }} {{ user_info.get('last_name', '') }}</div>
                                                <span class="opacity-80">{{ user_info.get('role', '') }}</span>
                                            </div>                                            
                                        </div>
                                        <div class="col-span-4">
                                            <div class="max-w-[900px]">
                                                <div class="mb-8 text-white">
                                                    <div class="mb-4 font-semibold uppercase">Status</div>
                                                    <ul class="timeline ">
                                                        <li class="timeline-item">
                                                            <div class="timeline-item-wrapper">
                                                                <div class="timeline-item-media">
                                                                    <div class="timeline-item-media-content">
                                                                        <span class="avatar avatar-circle text-gray-700 bg-gray-200 dark:text-gray-100" style="width: 30px; height: 30px; min-width: 30px; line-height: 30px; font-size: 15px;">
                                                                            <span class="avatar-icon avatar-icon-30">
                                                                                <svg
                                                                                    stroke="currentColor"
                                                                                    fill="currentColor"
                                                                                    stroke-width="0"
                                                                                    viewBox="0 0 20 20"
                                                                                    aria-hidden="true"
                                                                                    height="1em"
                                                                                    width="1em"
                                                                                    xmlns="http://www.w3.org/2000/svg"
                                                                                >
                                                                                    <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z" clip-rule="evenodd"></path>
                                                                                </svg>
                                                                            </span>
                                                                        </span>
                                                                    </div>
                                                                    <div class="timeline-connect"></div>
                                                                </div>
                                                                <div class="timeline-item-content">
                                                                    <div class="mt-1 ">
                                                                        <div class="flex items-center">
                                                                            <span class="ml-3 rtl:mr-3">STEP 1: Document Title</span>
                                                                            <div class="tag mx-1">
                                                                                <span class="tag-affix tag-prefix bg-green-500"></span>Completed
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </li>
                                                        <li class="timeline-item">
                                                            <div class="timeline-item-wrapper">
                                                                <div class="timeline-item-media">
                                                                    <div class="timeline-item-media-content">
                                                                        <span class="avatar avatar-circle text-gray-700 bg-gray-200 dark:text-gray-100" style="width: 30px; height: 30px; min-width: 30px; line-height: 30px; font-size: 15px;">
                                                                            <span class="avatar-icon avatar-icon-30">
                                                                                <svg
                                                                                    stroke="currentColor"
                                                                                    fill="currentColor"
                                                                                    stroke-width="0"
                                                                                    viewBox="0 0 20 20"
                                                                                    aria-hidden="true"
                                                                                    height="1em"
                                                                                    width="1em"
                                                                                    xmlns="http://www.w3.org/2000/svg"
                                                                                >
                                                                                    <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z" clip-rule="evenodd"></path>
                                                                                </svg>
                                                                            </span>
                                                                        </span>
                                                                    </div>
                                                                    <div class="timeline-connect"></div>
                                                                </div>
                                                                <div class="timeline-item-content">
                                                                    <div class="mt-1 ">
                                                                        <div class="flex items-center">
                                                                            <span class="ml-3 rtl:mr-3">STEP 2: Select a Control</span>
                                                                            <div class="tag mx-1">
                                                                                <span class="tag-affix tag-prefix bg-blue-500"></span>In- Progress
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </li>
                                                        <li class="timeline-item timeline-item-last">
                                                            <div class="flex flex-auto items-center gap-2">
                                                                <div>
                                                                    <span class="skeleton skeleton-circle animate-pulse w-[35px] h-[35px]"></span>
                                                                </div>
                                                                <div class="flex flex-col gap-4 w-full">
                                                                    <span class="skeleton skeleton-block animate-pulse w-[60%] h-[10px]"></span>
                                                                </div>
                                                            </div>
                                                        </li>
                                                    </ul>
                                                </div></div></div></div>
                                </div>
                                <div class="col-span-2 flex flex-col justify-center items-center bg-white dark:bg-gray-800">
                                    <div class="xl:min-w-[450px] px-8">
                                        <div class="mb-8">
                                            <h3 class="mb-1">STEP2: Control Selection</h3>
                                            <p>complete the form below</p>
                                        </div>
                                        <div>
                                            <form action="{{ url_for('documentwiz.signin_side3') }}" method="post">
                                                <div class="form-container vertical">
                                                    <div class="form-item vertical">
                                                        <label class="form-label mb-2" for="dropdown">Relate to which Control</label>
                                                        <div>
                                                            <select class="input" id="dropdown" name="dropdown" onchange="updateFields()" required>
                                                                <option value="" selected disabled>Choose a control</option>
                                                                {% for option in dropdown_options %}
                                                                <option value="{{ option }}">{{ option }}</option>
                                                                  {% endfor %}
                                                            </select>
                                                        </div>
                                                    </div>

                                                    <div class="form-item vertical">
                                                        <label class="form-label mb-2">Control Code</label>
                                                        <div>
                                                            <input
                                                            class="input"
                                                            id="control_code" 
                                                            type="text"
                                                            name="control_code"
                                                            placeholder="Please select a control above to get the control code"
                                                            readonly
                                                        >
                                                        </div>
                                                    </div>

                                                    <div class="form-item vertical">
                                                        <label class="form-label mb-2">Control Frequency</label>
                                                        <div>
                                                            <input
                                                            class="input"
                                                            id="control_frequency" 
                                                            type="text"
                                                            name="control_frequency"
                                                            placeholder="Please select a control above to get the control frequency"
                                                            readonly
                                                        >
                                                        </div>
                                                    </div>
                                                    <div class="form-item vertical">
                                                        <label class="form-label mb-2">Control Description</label>
                                                        <div>
                                                            <textarea
                                                            class="input"
                                                            style="height: 250px;"
                                                            id="control_description"
                                                            type="text"
                                                            name="control_description"
                                                            placeholder="Please select a control above to get the control Description"
                                                            readonly ></textarea>
                                                        </div>
                                                    </div>
                                                    <div class="form-item vertical">
                                                        <label class="form-label mb-2">Type of Document</label>
                                                        <div>
                                                            
                                                            <div class="flex flex-col gap-4">
                                                                <label class="radio-label inline-flex">
                                                                    <input type="radio" class="radio" name="radio22" value="Provision of sample" required>
                                                                    <span>Provision of sample</span>
                                                                </label>
                                                                <label class="radio-label inline-flex">
                                                                    <input type="radio" class="radio" name="radio22" value="Assessment of evidence" required>
                                                                    <span>Assessment of evidence</span>
                                                                </label>
                                                                <label class="radio-label inline-flex">
                                                                    <input type="radio" class="radio" name="radio22" value="Review of control" required>
                                                                    <span>Review of control</span>
                                                                </label>
                                                                <label class="radio-label inline-flex">
                                                                    <input type="radio" class="radio" name="radio22" value="Others" required>
                                                                    <span>Others</span>
                                                                </label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="form-item vertical">
                                                        <div>
                                                            <input
                                                                class="input"
                                                                id="other_input" 
                                                                style="display:none;"
                                                                type="text"
                                                                name="other_input"
                                                                autocomplete="off"
                                                                placeholder="Please type your Input for Others here"
                                                                value=""
                                                            >
                                                        </div>
                                                    </div>
                                                    <button class="btn btn-solid w-full" type="submit">Next</button>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </main>
                </div>                              
			</div>
		</div>
        <script>
            document.querySelectorAll('input[name="radio22"]').forEach(function(radio) {
                radio.addEventListener('change', function() {
                    var otherInput = document.getElementById('other_input');
                    if (this.value === 'Others') {
                        otherInput.style.display = 'block';
                    } else {
                        otherInput.style.display = 'none';
                    }
                });
            });
            </script>
<script>
    function updateFields() {
        var selectedOption = document.getElementById('dropdown').value;

        // Make an AJAX request to the Flask route
        fetch('/documentwiz/get_excel_data')
            .then(response => response.json())
            .then(data => {
                var excelData = data;
                if (excelData.hasOwnProperty(selectedOption)) {
                    document.getElementById('control_description').value = excelData[selectedOption]['Description'] || '';
                    document.getElementById('control_frequency').value = excelData[selectedOption]['Control Frequency'] || '';
                    document.getElementById('control_code').value = excelData[selectedOption]['Control'] || '';
                } else {
                    // Reset the fields if the selected option is not in excelData
                    document.getElementById('control_description').value = '';
                    document.getElementById('control_frequency').value = '';
                    document.getElementById('control_code').value = '';
                }
            })
            .catch(error => console.error('Error:', error));
    }

    function toggleOtherInput() {
        var otherInput = document.getElementById('other_input');
        otherInput.style.display = otherInput.style.display === 'none' ? 'block' : 'none';
    }
</script>

            
		<!-- Core Vendors JS -->
        
		<script src="{{ url_for('static', filename='js/vendors.min.js') }}"></script>

		<!-- Core JS -->
		<script src="{{ url_for('static', filename='js/app.min.js') }}"></script>
	</body>

</html>