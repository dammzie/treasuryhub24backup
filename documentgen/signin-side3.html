<!DOCTYPE html>
<html lang="en" dir="ltr" class="light">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="ie=edge">
		<title>Treasury Document Wizard - Login</title>

		<!-- Core CSS -->
		<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/style.css') }}">
		<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/modalpopup.css') }}">
	</head>
	<body>
		<!-- App Start-->
		<div id="root">
			<!-- App Layout-->
			<div class="app-layout-blank flex flex-auto flex-col h-[100vh]">
                <div class="h-full flex flex-auto flex-col justify-between">
                    <main class="h-full">
                        <div class="page-container relative h-full flex flex-auto flex-col">
                            <div class="grid lg:grid-cols-3 h-full">
                                <div class="bg-no-repeat bg-cover py-6 px-16 flex-col justify-between hidden lg:flex" style="background-image: url('{{ url_for('static', filename='img/others/auth-side-bg.jpg') }}');">
        
                                    <div>
                                        <div class="mb-6 flex items-center gap-4">
                                            <span class="avatar avatar-circle avatar-md border-2 border-white">
                                                <span class="avatar avatar-circle bg-teal-500 dark:bg-teal-500" data-avatar-size="30"">
                                                    <span class="avatar-string">{{ user_info.get('shortname', '') }}</span>
                                                </span>
                                            </span>
                                            <div class="text-white">
                                                <div class="font-semibold text-base">{{ user_info.get('first_name', '') }} {{ user_info.get('last_name', '') }}</div>
                                                <span class="opacity-80">{{ user_info.get('role', '') }}</span>
                                            </div>                                            
                                        </div>
                                        <div class="col-span-4">
                                            <div class="max-w-[900px]">
                                                <div class="mb-8 text-white">
                                                    <div class="mb-4 font-semibold uppercase">Status</div>
                                                    <ul class="timeline ">
                                                        <li class="timeline-item">
                                                            <div class="timeline-item-wrapper">
                                                                <div class="timeline-item-media">
                                                                    <div class="timeline-item-media-content">
                                                                        <span class="avatar avatar-circle text-gray-700 bg-gray-200 dark:text-gray-100" style="width: 30px; height: 30px; min-width: 30px; line-height: 30px; font-size: 15px;">
                                                                            <span class="avatar-icon avatar-icon-30">
                                                                                <svg
                                                                                    stroke="currentColor"
                                                                                    fill="currentColor"
                                                                                    stroke-width="0"
                                                                                    viewBox="0 0 20 20"
                                                                                    aria-hidden="true"
                                                                                    height="1em"
                                                                                    width="1em"
                                                                                    xmlns="http://www.w3.org/2000/svg"
                                                                                >
                                                                                    <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z" clip-rule="evenodd"></path>
                                                                                </svg>
                                                                            </span>
                                                                        </span>
                                                                    </div>
                                                                    <div class="timeline-connect"></div>
                                                                </div>
                                                                <div class="timeline-item-content">
                                                                    <div class="mt-1 ">
                                                                        <div class="flex items-center">
                                                                            <span class="ml-3 rtl:mr-3">STEP 1: Document Title</span>
                                                                            <div class="tag mx-1">
                                                                                <span class="tag-affix tag-prefix bg-green-500"></span>Completed
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </li>
                                                        <li class="timeline-item">
                                                            <div class="timeline-item-wrapper">
                                                                <div class="timeline-item-media">
                                                                    <div class="timeline-item-media-content">
                                                                        <span class="avatar avatar-circle text-gray-700 bg-gray-200 dark:text-gray-100" style="width: 30px; height: 30px; min-width: 30px; line-height: 30px; font-size: 15px;">
                                                                            <span class="avatar-icon avatar-icon-30">
                                                                                <svg
                                                                                    stroke="currentColor"
                                                                                    fill="currentColor"
                                                                                    stroke-width="0"
                                                                                    viewBox="0 0 20 20"
                                                                                    aria-hidden="true"
                                                                                    height="1em"
                                                                                    width="1em"
                                                                                    xmlns="http://www.w3.org/2000/svg"
                                                                                >
                                                                                    <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z" clip-rule="evenodd"></path>
                                                                                </svg>
                                                                            </span>
                                                                        </span>
                                                                    </div>
                                                                    <div class="timeline-connect"></div>
                                                                </div>
                                                                <div class="timeline-item-content">
                                                                    <div class="mt-1 ">
                                                                        <div class="flex items-center">
                                                                            <span class="ml-3 rtl:mr-3">STEP 2: Select a Control</span>
                                                                            <div class="tag mx-1">
                                                                                <span class="tag-affix tag-prefix bg-green-500"></span>Completed
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </li>
                                                        <li class="timeline-item">
                                                            <div class="timeline-item-wrapper">
                                                                <div class="timeline-item-media">
                                                                    <div class="timeline-item-media-content">
                                                                        <span class="avatar avatar-circle text-gray-700 bg-gray-200 dark:text-gray-100" style="width: 30px; height: 30px; min-width: 30px; line-height: 30px; font-size: 15px;">
                                                                            <span class="avatar-icon avatar-icon-30">
                                                                                <svg
                                                                                    stroke="currentColor"
                                                                                    fill="currentColor"
                                                                                    stroke-width="0"
                                                                                    viewBox="0 0 20 20"
                                                                                    aria-hidden="true"
                                                                                    height="1em"
                                                                                    width="1em"
                                                                                    xmlns="http://www.w3.org/2000/svg"
                                                                                >
                                                                                    <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z" clip-rule="evenodd"></path>
                                                                                </svg>
                                                                            </span>
                                                                        </span>
                                                                    </div>
                                                                    <div class="timeline-connect"></div>
                                                                </div>
                                                                <div class="timeline-item-content">
                                                                    <div class="mt-1 ">
                                                                        <div class="flex items-center">
                                                                            <span class="ml-3 rtl:mr-3">STEP 3: Document Checks</span>
                                                                            <div class="tag mx-1">
                                                                                <span class="tag-affix tag-prefix bg-blue-500"></span>In- Progress
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </li>
                                                        <li class="timeline-item timeline-item-last">
                                                            <div class="flex flex-auto items-center gap-2">
                                                                <div>
                                                                    <span class="skeleton skeleton-circle animate-pulse w-[35px] h-[35px]"></span>
                                                                </div>
                                                                <div class="flex flex-col gap-4 w-full">
                                                                    <span class="skeleton skeleton-block animate-pulse w-[60%] h-[10px]"></span>
                                                                </div>
                                                            </div>
                                                        </li>
                                                    </ul>
                                                </div></div></div></div>
                                </div>
                                <div class="col-span-2 flex flex-col justify-center items-center bg-white dark:bg-gray-800">
                                    <div class="xl:min-w-[450px] px-8">
                                        <div class="mb-8">
                                            <h3 class="mb-1">STEP3: Document Checks</h3>
                                            <p>complete the form below</p>
                                        </div>
                                        <div>
                                            <form action="{{ url_for('documentwiz.signin_side4') }}" method="post">
                                                <div class="form-container vertical">
                                                    <div class="form-item vertical">
                                                        <label class="form-label mb-2">Has the control operated as described during the period under assessment?</label>
                                                        <div>
                                                            
                                                            <div class="flex flex-col gap-4">
                                                                <label class="radio-label inline-flex">
                                                                    <input type="radio" class="radio" name="groupVerticalRadioExample111" value="Yes" required>
                                                                    <span>Yes</span>
                                                                </label>
                                                                <label class="radio-label inline-flex">
                                                                    <input type="radio" class="radio" name="groupVerticalRadioExample111" value="No" required>
                                                                    <span>No</span>
                                                                </label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="form-item vertical">
                                                        <div>
                                                            <input
                                                                class="input"
                                                                id="NoInput2" 
                                                                style="display:none;"
                                                                type="text"
                                                                name="NoInput2"
                                                                autocomplete="off"
                                                                placeholder="Please provide an explanation"
                                                                value=""
                                                            >
                                                        </div>
                                                    </div>
                                                    <div class="form-item vertical">
                                                        <label class="form-label mb-2">How many supporting schedules have been prepared by Pearson?</label>
                                                        <div>
                                                            <input
                                                                class="input"
                                                                type="number"
                                                                id="numberOfSchedules"
                                                                name="numberOfSchedules"
                                                                autocomplete="off"
                                                                placeholder="Please enter a number"
                                                                value=""
                                                                required
                                                            >
                                                        </div>
                                                    </div>
                                                    
                                                    <div id="schedulesContainer"></div>
                                                    <div id="scheduleTemplate" class="form-item vertical" style="display: none;">
                                                        <label class="form-label mb-2">What is the underlying source of the supporting schedule (schedule 1)?</label>
                                                        <div class="flex flex-col gap-4">
                                                            <div class="flex flex-col">
                                                                <label class="checkbox-label mb-2">
                                                                    <input class="checkbox" type="checkbox" name="schedule0_option0" value="ETC transaction listing of derivatives validated in Misys or via manual confirmation">
                                                                    <span>ETC transaction listing of derivatives validated in Misys or via manual confirmation</span>
                                                                </label>
                                                                <label class="checkbox-label mb-2">
                                                                    <input class="checkbox" type="checkbox" name="schedule0_option1" value="Other ETC information (e.g. listing of payments made)" >
                                                                    <span>Other ETC information (e.g. listing of payments made)</span>
                                                                </label>
                                                                <label class="checkbox-label mb-2">
                                                                    <input class="checkbox" type="checkbox"  name="schedule0_option2" value="Bank provided document (e.g. statement, valuation statement)" >
                                                                    <span>Bank provided document (e.g. statement, valuation statement)</span>
                                                                </label>
                                                                <label class="checkbox-label mb-2">
                                                                    <input class="checkbox" type="checkbox" name="schedule0_option3" value="Evidence provided by a third party (then specify who in a text field)">
                                                                    <span>Evidence provided by a third party (then specify who in a text field)</span>
                                                                </label>
                                                                <label class="checkbox-label mb-2">
                                                                    <input class="checkbox" type="checkbox" name="schedule0_option4" value="Refinitiv">
                                                                    <span>Refinitiv</span>
                                                                </label>
                                                                <label class="checkbox-label mb-2">
                                                                    <input class="input" type="text" name="schedule0_option5" value="" placeholder="Others">
                                                                </label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="form-item vertical">
                                                        <label class="form-label mb-2">Have any calculations been re-performed to ensure that totals have been properly calculated? </label>
                                                        <div>
                                                            
                                                            <div class="flex flex-col gap-4">
                                                                <label class="radio-label inline-flex">
                                                                    <input type="radio" class="radio" name="groupVerticalRadioExample4" value="Yes" required>
                                                                    <span>Yes</span>
                                                                </label>
                                                                <label class="radio-label inline-flex">
                                                                    <input type="radio" class="radio" name="groupVerticalRadioExample4" value="There are no Calculations" required>
                                                                    <span>There are no Calculations</span>
                                                                </label>
                                                                <label class="radio-label inline-flex">
                                                                    <input type="radio" class="radio" name="groupVerticalRadioExample4" value="No" required>
                                                                    <span>No</span>
                                                                </label>
                                                                
                                                            </div>
                                                            <div id="warningMessage" style="display:none; color: red; margin-top: 10px;">
                                                                Please review and recalculate then tick Yes.
                                                            </div>
                                                            
                                                        </div>
                                                    </div>
                                                    {% if dropdown_selection in ['ETC user access', 'Finastra access control', 'Access to 360T', 'Bank systems admin'] %}
                                                     <div class="form-item vertical" id="textareaFormItem">
                                                        <label class="form-label mb-2" >I have reviewed the user entitlements report and confirm that all access is appropriate and needs to be retained </label>
                                                        <div>
                                                            
                                                            <div class="flex flex-col gap-4">
                                                                <label class="radio-label inline-flex">
                                                                    <input type="radio" class="radio" name="groupVerticalRadioExample44" value="Confirmed">
                                                                    <span>Confirmed</span>
                                                                </label>
                                                                <label class="radio-label inline-flex">
                                                                    <input type="radio" class="radio" name="groupVerticalRadioExample44" value="Following review and updates to access, this is now confirmed">
                                                                    <span>Following review and updates to access, this is now confirmed</span>
                                                                </label>
                                                                <label class="radio-label inline-flex">
                                                                    <input type="radio" class="radio" name="groupVerticalRadioExample44" value="Not confirmed">
                                                                    <span>Not confirmed</span>
                                                                </label>
                                                                
                                                            </div>
                                                            <div id="warningMessage2" style="display:none; color: red; margin-top: 10px;">
                                                                Please make appropriate changes to user entitlements and update this form once updated and reviewed
                                                            </div>
                                                            
                                                        </div>
                                                    </div>
                                                    {% endif %}
                                                    <div class="form-item vertical">
                                                        <label class="form-label mb-2">Based on the work performed, are you comfortable that the control is working effectively? </label>
                                                        <div>
                                                            
                                                            <div class="flex flex-col gap-4">
                                                                <label class="radio-label inline-flex">
                                                                    <input type="radio" class="radio" name="groupVerticalRadioExample5" value="Yes" required>
                                                                    <span>Yes</span>
                                                                </label>
                                                                <label class="radio-label inline-flex">
                                                                    <input type="radio" class="radio" name="groupVerticalRadioExample5" value="Yes having resolved small issues" required>
                                                                    <span>Yes having resolved small issues</span>
                                                                </label>
                                                                <label class="radio-label inline-flex">
                                                                    <input type="radio" class="radio" name="groupVerticalRadioExample5" value="Yes having resolved major issues" required>
                                                                    <span>Yes having resolved major issues</span>
                                                                </label>
                                                                <label class="radio-label inline-flex">
                                                                    <input type="radio" class="radio show-modal" name="groupVerticalRadioExample5" value="No" required >
                                                                    <span>No</span>
                                                                </label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="form-item vertical">
                                                        <div>
                                                            <input
                                                                class="input"
                                                                id="Yes1" 
                                                                style="display:none;"
                                                                type="text"
                                                                name="Yes1"
                                                                autocomplete="off"
                                                                placeholder=" Please outline these small issues here"
                                                                value=""
                                                            >
                                                        </div>
                                                    </div>
                                                    <div class="form-item vertical">
                                                        <div>
                                                            <input
                                                                class="input"
                                                                id="Yes2" 
                                                                style="display:none;"
                                                                type="text"
                                                                name="Yes2"
                                                                autocomplete="off"
                                                                placeholder="Please outline this Major issues here"
                                                                value=""
                                                            >
                                                        </div>
                                                    </div>
                                                    <button class="btn btn-solid w-full" type="submit">Next</button>
                                                </div>
                                            </form>
                                            <section>

                                                <span class="overlay"></span>
                                                <div class="modal-box">
                                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" class="" style="color: red; width:60px;">
                                                        <path fill-rule="evenodd" d="M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z" clip-rule="evenodd"></path>
                                                    </svg>
                                                <h3 class="form-label mb-2">This document will be submitted as control not effective. Because of your answer to the question below
                                               </h3><br>
                                               <div class="form-item vertical">
                                                <label class="form-label mb-2">Based on the work performed, are you comfortable that the control is working effectively? </label>
                                                <div>
                                                    
                                                    <div class="flex flex-col gap-4">
                                                        <label class="radio-label inline-flex">
                                                            <input type="radio" class="radio" name="groupVerticalRadioExample5" value="No" checked="">
                                                            <span>No</span>
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-item vertical">
                                                <label class="form-label mb-2">Click <a style="color: red;">&nbspYes&nbsp</a> to proceed or click <a style="color: blue;">&nbspNo&nbsp</a> to cancel </label>
                                            
                                                </div>
                                                <div class="buttons">
                                                <button style="background-color: red;" class="close-btn">Yes</button>
                                                <a href="{{ url_for('documentwiz.dwizapplogin') }}"><button class="close-btn">No</button></a>
                                                </div>
                                                </div>
                                            </section>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </main>
                </div>                              
			</div>
		</div>
        <script>
            document.querySelectorAll('input[name="groupVerticalRadioExample111"]').forEach(function(radio) {
                radio.addEventListener('change', function() {
                    var noInput = document.getElementById('NoInput2');
                    noInput.style.display = this.value === 'No' ? 'block' : 'none';
                });
            });
        
            document.querySelectorAll('input[name="groupVerticalRadioExample5"]').forEach(function(radio) {
                radio.addEventListener('change', function() {
                    var yes1Input = document.getElementById('Yes1');
                    var yes2Input = document.getElementById('Yes2');
                    yes1Input.style.display = this.value === 'Yes having resolved small issues' ? 'block' : 'none';
                    yes2Input.style.display = this.value === 'Yes having resolved major issues' ? 'block' : 'none';
                });
            });
        
            // ... Rest of your existing script for numberOfSchedules ...
        </script>
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                function adjustVisibilityz() {
                    var warningMessagez = document.getElementById('warningMessage');
                    var submitButtonz = document.querySelector('button[type="submit"]');
                    var radioInputz = document.querySelector('input[name="groupVerticalRadioExample4"]:checked');
        
                    if (radioInputz) {
                        var selectedValue = radioInputz.value;
                        warningMessagez.style.display = selectedValue === 'No' ? 'block' : 'none';
                        submitButtonz.style.display = selectedValue === 'No' ? 'none' : 'block';
                    }
                }
        
                document.querySelectorAll('input[name="groupVerticalRadioExample4"]').forEach(function(radio) {
                    radio.addEventListener('change', adjustVisibilityz);
                });
            });
        </script>
<!--Update for the visible form selection for form 44-->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        function adjustVisibility() {
            var warningMessage = document.getElementById('warningMessage2');
            var submitButton = document.querySelector('button[type="submit"]');
            var radioInput = document.querySelector('input[name="groupVerticalRadioExample44"]:checked');

            if (radioInput) {
                var selectedValue = radioInput.value;
                warningMessage.style.display = selectedValue === 'Not confirmed' ? 'block' : 'none';
                submitButton.style.display = selectedValue === 'Not confirmed' ? 'none' : 'block';
            }
        }

        document.querySelectorAll('input[name="groupVerticalRadioExample44"]').forEach(function(radio) {
            radio.addEventListener('change', adjustVisibility);
        });
    });
</script>



            
        
        <script>
            document.getElementById('numberOfSchedules').addEventListener('input', function() {
                var container = document.getElementById('schedulesContainer');
                var template = document.getElementById('scheduleTemplate');
                var count = parseInt(this.value, 10);
                
                container.innerHTML = ''; // Clear the current content of the container
                
                for (var i = 0; i < count; i++) {
                    var clone = template.cloneNode(true);
                    clone.style.display = 'block';
                    clone.id = '';
                    
                    // Update the label for each schedule
                    clone.querySelector('.form-label').textContent = `What is the underlying source of the supporting schedule for schedule ${i + 1}?`;

                    // Update the name attribute for each checkbox and the "Others" text input
                    var checkboxes = clone.querySelectorAll('input[type="checkbox"]');
                    var otherInput = clone.querySelector('input[type="text"]');
                    otherInput.name = `schedule${i}_option5`;  // Set the name for the "Others" input

                    checkboxes.forEach(function(checkbox, index) {
                        checkbox.name = `schedule${i}_option${index}`;
                    });

                    container.appendChild(clone);
                }
            });


        </script>
        <!--modal pop-up open and close js-->
        <script>
            const section = document.querySelector("section"),
            overlay = document.querySelector(".overlay"),
            showBtn = document.querySelector(".show-modal"),
            closeBtn = document.querySelector(".close-btn");
            showBtn.addEventListener("click", () =>
           section.classList.add("active"));
            overlay.addEventListener("click", () =>
            section.classList.remove("active")
            );
            closeBtn.addEventListener("click", () =>
            section.classList.remove("active")
            );
            </script>

        
		<script src="{{ url_for('static', filename='js/vendors.min.js') }}"></script>

		<!-- Core JS -->
		<script src="{{ url_for('static', filename='js/app.min.js') }}"></script>
	</body>

</html>